nzWAYSHRINES = nzWAYSHRINES or {}
nzWAYSHRINES.Storage = nzWAYSHRINES.Storage or {}
nzWAYSHRINES.PhaseMap = {}
nzWAYSHRINES.Audio = {}
nzWAYSHRINES.NPCs = {}
nzWAYSHRINE_STATE_TELEPORT_POS = 1
nzWAYSHRINE_STATE_TELEPORT_PINS = 2
nzWAYSHRINE_STATE_TELEPORT_PHASE = 3
nzWAYSHRINE_STATE_TELEPORT_DEST_PHASE = 4
nzWAYSHRINE_STATE_TELEPORT_ORIGIN = 5
nzWAYSHRINE_STATE_TELEPORT_INTERACTABLE = 6
nzWAYSHRINE_STATE_TELEPORT_DEST = 7
SIT_TO_STAND = 1

-- Memory // Processor Opti
function nzWAYSHRINES:newPhaseMap(x)
    self.PhaseMap[x] = {}
    self.Audio[x] = {}
    self.NPCs[x] = {}
end

function nzWAYSHRINES:new(id, data)
    self.Storage[id] = data
    self.Storage[id].id = id
    table.insert(self.PhaseMap[data[nzWAYSHRINE_STATE_TELEPORT_PHASE]], id)
end

function nzWAYSHRINES:createAudioSource(id, data)
    table.insert(self.Audio[id], data)
end

function nzWAYSHRINES:createNPC(id, data)
    table.insert(self.NPCs[id], data)
end

nzWAYSHRINES:newPhaseMap(0)
nzWAYSHRINES:newPhaseMap(1)
nzWAYSHRINES:newPhaseMap(2)

nzWAYSHRINES:createAudioSource(2, {"http://fallout.fm:8000/falloutfm3.ogg", Vector(5108, 538, 5140)})

nzWAYSHRINES:createNPC(2, {
    name = "Anne Manchester. Bruce",
    model = "models/yshera/female/solesurvivor_vault_female1_npc.mdl",
    pos = Vector(5265.792969, 324.681274, 5255.031250),
    ang = Angle(0, 180, 0),
    behavior = SIT_TO_STAND
})

nzWAYSHRINES:new("FreesideToWasteland", {
    [nzWAYSHRINE_STATE_TELEPORT_PINS] = {Vector(-1777.3764648438, -1529.1765136719, -4583.3349609375), Vector(-1877.80078125, -1534.6823730469, -4390.5346679688), Vector(-1990.5482177734, -1534.404296875, -4400.6655273438), Vector(-2064.2976074219, -1529.1314697266, -4585.8803710938),},
    [nzWAYSHRINE_STATE_TELEPORT_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_DEST_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_ORIGIN] = Vector(-1919.381470, -1496.630493, -4535.968750),
    [nzWAYSHRINE_STATE_TELEPORT_INTERACTABLE] = {"FAIRBANKS, ALASKA", "Enter"},
    [nzWAYSHRINE_STATE_TELEPORT_DEST] = Vector(3019.702148, 13031.656250, 185.265488),
})

nzWAYSHRINES:new("InsitLeave", {
    [nzWAYSHRINE_STATE_TELEPORT_PINS] = {Vector(2421.7421875, 11411.041015625, -502.02111816406), Vector(2506.3083496094, 11411.97265625, -500.89666748047), Vector(2503.5690917969, 11412.127929688, -586.39007568359), Vector(2421.1555175781, 11414.265625, -588.6640625),},
    [nzWAYSHRINE_STATE_TELEPORT_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_DEST_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_ORIGIN] = Vector(2463.520020, 11346.179688, -571.171021),
    [nzWAYSHRINE_STATE_TELEPORT_INTERACTABLE] = {"Alaska", "Enter"},
    [nzWAYSHRINE_STATE_TELEPORT_DEST] = Vector(2389.804199, 11702.092773, 144.963684),
})

nzWAYSHRINES:new("BOSBunker01", {
    [nzWAYSHRINE_STATE_TELEPORT_PINS] = {Vector(7311.3461914063, 14303.590820313, -1398.265625), Vector(7459.998046875, 14302.282226563, -1397.6994628906), Vector(7459.998046875, 14299.125, -1513.6337890625), Vector(7310.6044921875, 14303.590820313, -1513.6430664063),},
    [nzWAYSHRINE_STATE_TELEPORT_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_DEST_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_ORIGIN] = Vector(7388.250000, 14164.435547, -1454.456665),
    [nzWAYSHRINE_STATE_TELEPORT_INTERACTABLE] = {"BOS Bunker", "Enter"},
    [nzWAYSHRINE_STATE_TELEPORT_DEST] = Vector(13635.432617,10334.666992, -1436.773193),
})

nzWAYSHRINES:new("BOSBunker02", {
    [nzWAYSHRINE_STATE_TELEPORT_PINS] = {Vector(13686.374023438, 10276.276367188, -1420.4306640625), Vector(13583.380859375, 10276.275390625, -1419.8811035156), Vector(13576.575195313, 10266.874023438, -1506.3941650391), Vector(13687.861328125, 10266.874023438, -1504.9560546875)},
    [nzWAYSHRINE_STATE_TELEPORT_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_DEST_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_ORIGIN] = Vector(13635.432617,10334.666992, -1446.773193),
    [nzWAYSHRINE_STATE_TELEPORT_INTERACTABLE] = {"BOS Bunker", "Enter"},
    [nzWAYSHRINE_STATE_TELEPORT_DEST] = Vector(7388.250000, 14164.435547, -1444.456665),
})

nzWAYSHRINES:new("FreesideVault", {
    [nzWAYSHRINE_STATE_TELEPORT_DEST] = Vector(5255, 605, 5123),
    [nzWAYSHRINE_STATE_TELEPORT_PINS] = {Vector(-2074.0537109375, 11406.4609375, 4312.9418945313), Vector(-2000.0537109375, 11406.4609375, 4312.9418945313), Vector(-2000.0537109375, 11406.4609375, 4230.9418945313), Vector(-2074.0537109375, 11406.4609375, 4230.9418945313),},
    [nzWAYSHRINE_STATE_TELEPORT_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_DEST_PHASE] = 2,
    [nzWAYSHRINE_STATE_TELEPORT_ORIGIN] = Vector(-2000.0537109375, 11406.4609375, 4230.9418945313),
    [nzWAYSHRINE_STATE_TELEPORT_INTERACTABLE] = {"VAULT ???", "Enter"},
})

nzWAYSHRINES:new("FreesideVaultToFreeside", {
    [nzWAYSHRINE_STATE_TELEPORT_DEST] = Vector(-2023.273682, 11337.394531, 4289.031250),
    [nzWAYSHRINE_STATE_TELEPORT_PINS] = {Vector(5282.96875, 628.74914550781, 5167.5024414063), Vector(5282.96875, 579.22045898438, 5168.0830078125), Vector(5282.96875, 578.87738037109, 5060.09375), Vector(5282.9516601563, 628.90258789063, 5059.03125),},
    [nzWAYSHRINE_STATE_TELEPORT_PHASE] = 2,
    [nzWAYSHRINE_STATE_TELEPORT_DEST_PHASE] = 0,
    [nzWAYSHRINE_STATE_TELEPORT_ORIGIN] = Vector(5238, 599, 5123),
    [nzWAYSHRINE_STATE_TELEPORT_INTERACTABLE] = {"Freeside", "Enter"}
})

hook.Run("wayshrine_npc_reload")

if SERVER then
    concommand.Add("makeSkyx", function(player, c, a)
        -- get player looking at entity
        local ent = player:GetEyeTrace().Entity
        -- print to console 
        print(ent:GetModel())
        -- turn prop into prop_detail
        local detial = ents.Create("prop_static")
        -- set model
        detial:SetModel(ent:GetModel())
        detial:SetPos(ent:GetPos())
        detial:SetAngles(ent:GetAngles())
        detial:Spawn()
    end)
end